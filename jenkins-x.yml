buildPack: none
pipelineConfig:
  pipelines:
    pullRequest:
      pipeline:
        agent:
          image: mutadev/muta:build-env
        stages:
          - name: "ci-test"
            parallel:
              - name: "cargo fmt"
                steps:
                  - command: make
                    args:
                      - fmt
              - name: "cargo clippy"
                steps:
                  - command: make
                    args:
                      - "clippy"
              - name: "cargo test"
                steps:
                  - command: make
                    args:
                      - "test"
              - name: "e2e test"
                steps:
                  - command: make
                    args:
                      - "e2e-test"
