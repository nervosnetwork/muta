buildPack: none
pipelineConfig:
  pipelines:
    pullRequest:
      pipeline:
        agent:
          image: mutadev/muta:build-env
        stages:
          - name: ci
            options:
              containerOptions:
                resources:
                  limits:
                    cpu: 8
                    memory: 8Gi
                  requests:
                    cpu: 4
                    memory: 4Gi
            steps:
              - name: make-ci
                command: make
                args: ['ci']

              - name: make-e2e
                image: mutadev/muta:e2e-env
                command: make
                args: ['e2e-test']

              - name: make-release
                command: make
                args: ['prod']
